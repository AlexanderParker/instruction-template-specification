<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Specification - Instruction Template Specification (ITS)</title>
    <meta name="description" content="Complete technical specification for ITS schema and instruction types" />
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 1000px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .header {
        text-align: center;
        padding: 2rem 0;
        border-bottom: 1px solid #eee;
        margin-bottom: 2rem;
      }

      .header h1 {
        color: #0366d6;
        margin-bottom: 0.5rem;
      }

      .nav {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 6px;
        margin-bottom: 2rem;
      }

      .nav a {
        color: #0366d6;
        text-decoration: none;
        margin-right: 1rem;
      }

      .schema-section {
        background: #f6f8fa;
        border: 1px solid #e1e4e8;
        border-radius: 6px;
        padding: 1.5rem;
        margin: 2rem 0;
      }

      .schema-section h3 {
        color: #0366d6;
        margin-top: 0;
      }

      pre {
        background: #f6f8fa;
        border: 1px solid #e1e4e8;
        border-radius: 3px;
        padding: 1rem;
        overflow-x: auto;
        font-size: 0.9rem;
      }

      .instruction-type {
        border: 1px solid #e1e4e8;
        border-radius: 6px;
        padding: 1rem;
        margin: 1rem 0;
        background: white;
      }

      .instruction-type h4 {
        color: #0366d6;
        margin-top: 0;
      }

      .properties table {
        width: 100%;
        border-collapse: collapse;
        margin: 1rem 0;
      }

      .properties th,
      .properties td {
        border: 1px solid #e1e4e8;
        padding: 8px 12px;
        text-align: left;
      }

      .properties th {
        background: #f6f8fa;
        font-weight: bold;
      }

      .back-to-top {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #0366d6;
        color: white;
        padding: 10px 15px;
        border-radius: 50px;
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>ITS Specification</h1>
      <p>Complete technical specification for Instruction Template Specification v1.0</p>
    </div>

    <div class="nav">
      <a href="index.html">← Back to Home</a>
      <a href="getting-started.html">Getting Started</a>
      <a href="examples.html">Examples</a>
      <a href="https://github.com/alexanderparker/instruction-template-specification">GitHub</a>
    </div>

    <h2>Overview</h2>
    <p>
      The Instruction Template Specification (ITS) defines a JSON-based format for creating templates that compile into AI instructions rather than static
      content. This enables content creators to build reusable templates with placeholders that generate dynamic, AI-powered content.
    </p>

    <div class="schema-section">
      <h3>Core Concepts</h3>
      <ul>
        <li><strong>Instruction-Generative</strong>: Placeholders become AI instructions, not data substitutions</li>
        <li><strong>Content-First</strong>: Natural language content with embedded placeholders</li>
        <li><strong>Type System</strong>: Extensible instruction types with validation</li>
        <li><strong>Compilation</strong>: Templates compile to structured AI prompts</li>
      </ul>
    </div>

    <h2>Schema Structure</h2>

    <div class="schema-section">
      <h3>Base Schema URL</h3>
      <p><code>https://alexanderparker.github.io/instruction-template-specification/schema/v1.0/its-base-schema-v1.json</code></p>

      <h4>Required Properties</h4>
      <div class="properties">
        <table>
          <thead>
            <tr>
              <th>Property</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>version</code></td>
              <td>string</td>
              <td>Template format version (semantic versioning)</td>
            </tr>
            <tr>
              <td><code>content</code></td>
              <td>array</td>
              <td>Array of content elements (text, placeholders, conditionals)</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h4>Optional Properties</h4>
      <div class="properties">
        <table>
          <thead>
            <tr>
              <th>Property</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>extends</code></td>
              <td>array</td>
              <td>Schema references for instruction type definitions</td>
            </tr>
            <tr>
              <td><code>metadata</code></td>
              <td>object</td>
              <td>Template metadata (name, author, tags, etc.)</td>
            </tr>
            <tr>
              <td><code>customInstructionTypes</code></td>
              <td>object</td>
              <td>Template-specific instruction type definitions</td>
            </tr>
            <tr>
              <td><code>compilerConfig</code></td>
              <td>object</td>
              <td>Configuration for template compilation</td>
            </tr>
            <tr>
              <td><code>variables</code></td>
              <td>object</td>
              <td>Template-level variables for reuse</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <h2>Content Elements</h2>

    <div class="instruction-type">
      <h4>Text Element</h4>
      <p>Static text content that appears as-is in the compiled template.</p>
      <pre><code>{
  "type": "text",
  "text": "Your static content here",
  "id": "optional-identifier"
}</code></pre>
    </div>

    <div class="instruction-type">
      <h4>Instruction Placeholder</h4>
      <p>Placeholder that becomes an AI instruction in the compiled template.</p>
      <pre><code>{
  "type": "placeholder",
  "id": "unique-identifier",
  "instructionType": "list",
  "config": {
    "description": "Content description for the AI",
    "displayName": "Human-readable name",
    // Additional type-specific configuration
  }
}</code></pre>
    </div>

    <div class="instruction-type">
      <h4>Conditional Element</h4>
      <p>Content that appears based on variable conditions.</p>
      <pre><code>{
  "type": "conditional",
  "condition": "variable_name == 'value'",
  "content": [
    // Content if condition is true
  ],
  "else": [
    // Content if condition is false (optional)
  ]
}</code></pre>
    </div>

    <h2>Standard Instruction Types</h2>
    <p>Reference: <a href="schema/v1.0/its-standard-types-v1.json">Standard Types Schema</a></p>

    <div class="instruction-type">
      <h4>list</h4>
      <p>Generates formatted lists with customizable styling and item counts.</p>
      <pre><code>{
  "instructionType": "list",
  "config": {
    "description": "list 5 different citrus fruits",
    "format": "bullet_points",  // bullet_points, numbered, dashes, plain
    "itemCount": 5              // optional
  }
}</code></pre>
      <p><strong>Compiles to:</strong></p>
      <pre><code>&lt;&lt;Replace this placeholder with a list using this user prompt: ([{&lt;list 5 different citrus fruits&gt;}]). Format requirements: Use bullet_points formatting with each item on a new line. Create exactly 5 items.&gt;&gt;</code></pre>
    </div>

    <div class="instruction-type">
      <h4>paragraph</h4>
      <p>Generates paragraphs with specified tone and length.</p>
      <pre><code>{
  "instructionType": "paragraph",
  "config": {
    "description": "Write about sustainable technology",
    "tone": "professional",     // formal, casual, enthusiastic, professional, friendly
    "length": "medium"          // short, medium, long
  }
}</code></pre>
      <p><strong>Compiles to:</strong></p>
      <pre><code>&lt;&lt;Replace this placeholder with text using this user prompt: ([{&lt;Write about sustainable technology&gt;}]). Format requirements: Use professional tone and medium length (2-4 sentences).&gt;&gt;</code></pre>
    </div>

    <div class="instruction-type">
      <h4>table</h4>
      <p>Generates tables with configurable formatting and dimensions.</p>
      <pre><code>{
  "instructionType": "table",
  "config": {
    "description": "Compare technology features",
    "format": "markdown",       // markdown, plain_text, csv
    "columns": 3,               // optional
    "rows": 4                   // optional
  }
}</code></pre>
      <p><strong>Compiles to:</strong></p>
      <pre><code>&lt;&lt;Replace this placeholder with a table using this user prompt: ([{&lt;Compare technology features&gt;}]). Format requirements: Use markdown format. Include 3 columns. Include 4 rows.&gt;&gt;</code></pre>
    </div>

    <div class="instruction-type">
      <h4>code_block</h4>
      <p>Generates code snippets with syntax highlighting.</p>
      <pre><code>{
  "instructionType": "code_block",
  "config": {
    "description": "Create a Python function that sorts a list",
    "language": "python"        // javascript, python, java, html, css, sql, bash, generic
  }
}</code></pre>
      <p><strong>Compiles to:</strong></p>
      <pre><code>&lt;&lt;Replace this placeholder with a code block using this user prompt: ([{&lt;Create a Python function that sorts a list&gt;}]). Format requirements: Use python language with proper syntax highlighting formatting.&gt;&gt;</code></pre>
    </div>

    <div class="instruction-type">
      <h4>dialogue</h4>
      <p>Generates conversations between multiple participants.</p>
      <pre><code>{
  "instructionType": "dialogue",
  "config": {
    "description": "Conversation about project planning",
    "participantCount": 2,      // 2-6
    "style": "casual"           // casual, formal, dramatic, humorous
  }
}</code></pre>
      <p><strong>Compiles to:</strong></p>
      <pre><code>&lt;&lt;Replace this placeholder with a dialogue using this user prompt: ([{&lt;Conversation about project planning&gt;}]). Format requirements: Create a conversation between 2 people using casual style. Format each line as: Person Name: "Dialogue"&gt;&gt;</code></pre>
    </div>

    <div class="instruction-type">
      <h4>quote</h4>
      <p>Generates relevant quotes with optional attribution.</p>
      <pre><code>{
  "instructionType": "quote",
  "config": {
    "description": "Quote about innovation and creativity",
    "includeAttribution": true  // include attribution if true
  }
}</code></pre>
      <p><strong>Compiles to:</strong></p>
      <pre><code>&lt;&lt;Replace this placeholder with a quote using this user prompt: ([{&lt;Quote about innovation and creativity&gt;}]). Format requirements: Include attribution with the quote.&gt;&gt;</code></pre>
    </div>

    <div class="instruction-type">
      <h4>summary</h4>
      <p>Generates summaries of varying lengths and detail.</p>
      <pre><code>{
  "instructionType": "summary",
  "config": {
    "description": "Summarize the key benefits of renewable energy",
    "length": "standard"        // brief, standard, detailed
  }
}</code></pre>
      <p><strong>Compiles to:</strong></p>
      <pre><code>&lt;&lt;Replace this placeholder with a summary using this user prompt: ([{&lt;Summarize the key benefits of renewable energy&gt;}]). Format requirements: Use standard length (3-5 sentences).&gt;&gt;</code></pre>
    </div>

    <div class="instruction-type">
      <h4>image_description</h4>
      <p>Generates descriptive text for images with different styles.</p>
      <pre><code>{
  "instructionType": "image_description",
  "config": {
    "description": "Describe a futuristic city skyline",
    "style": "photorealistic"  // photorealistic, artistic, technical
  }
}</code></pre>
      <p><strong>Compiles to:</strong></p>
      <pre><code>&lt;&lt;Replace this placeholder with an image description using this user prompt: ([{&lt;Describe a futuristic city skyline&gt;}]). Format requirements: Use photorealistic style (detailed realistic description).&gt;&gt;</code></pre>
    </div>

    <h2>Custom Instruction Types</h2>
    <p>You can define custom instruction types for specific use cases:</p>

    <pre><code>{
  "customInstructionTypes": {
    "my_custom_type": {
      "template": "<<Custom instruction: {description}. Style: {customParam}>>",
      "description": "Description of what this type does",
      "configSchema": {
        "type": "object",
        "properties": {
          "customParam": {
            "type": "string",
            "enum": ["option1", "option2"],
            "default": "option1"
          }
        }
      }
    }
  }
}</code></pre>

    <h2>Compilation Process</h2>
    <p>Templates compile into AI prompts following this process:</p>
    <ol>
      <li><strong>Load schemas</strong>: Base schema + extended type schemas</li>
      <li><strong>Validate template</strong>: Check structure and type definitions</li>
      <li><strong>Process content</strong>: Convert elements to text + instructions</li>
      <li><strong>Apply escaping</strong>: Wrap user content with safe delimiters</li>
      <li><strong>Generate prompt</strong>: Combine system prompt with processed content</li>
    </ol>

    <h3>User Content Escaping</h3>
    <p>To prevent parsing conflicts when user descriptions contain quotes, brackets, or other special characters, ITS uses a robust escaping system:</p>

    <div class="schema-section">
      <h4>Escaping Format</h4>
      <p><strong>User content wrapper:</strong> <code>([{&lt;USER_CONTENT&gt;}])</code></p>

      <p><strong>Why this pattern:</strong></p>
      <ul>
        <li>Extremely rare for users to type this exact sequence</li>
        <li>Multiple nested bracket types prevent accidental termination</li>
        <li>Visually distinct from regular content</li>
        <li>AI models can easily identify content boundaries</li>
      </ul>

      <p><strong>Handles edge cases like:</strong></p>
      <pre><code>"description": "Create code like {\"key\": \"value\"} with \"quotes\" and &lt;&lt;brackets&gt;&gt;"</code></pre>

      <p><strong>Safely compiles to:</strong></p>
      <pre><code>([{&lt;Create code like {"key": "value"} with "quotes" and &lt;&lt;brackets&gt;&gt;&gt;}])</code></pre>
    </div>

    <div class="schema-section">
      <h3>Example Compilation</h3>
      <p><strong>Input Template:</strong></p>
      <pre><code>{
  "content": [
    {"type": "text", "text": "Here are some fruits:\n"},
    {
      "type": "placeholder",
      "instructionType": "list",
      "config": {
        "description": "list 5 citrus fruits",
        "format": "bullet_points"
      }
    }
  ]
}</code></pre>

      <p><strong>Compiled Output:</strong></p>
      <pre><code>You are an AI designed to convert content templates into actual content.

Here are some fruits:

&lt;&lt;Replace this placeholder with a list using this user prompt: "list 5 citrus fruits". Format requirements: Use bullet_points formatting with each item on a new line.&gt;&gt;</code></pre>
    </div>

    <a href="#" class="back-to-top">↑ Top</a>

    <footer style="text-align: center; padding: 2rem; color: #666; border-top: 1px solid #eee; margin-top: 3rem">
      <p>Instruction Template Specification (ITS) • <a href="https://github.com/alexanderparker/instruction-template-specification">GitHub</a> • MIT License</p>
    </footer>
  </body>
</html>
